<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="color-scheme" content="light dark" />
  <title>Enterprise Operations Dashboard</title>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Pretendard:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
  <script defer src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    /* -------------------------------
       Design System (CSS Variables)
       ------------------------------- */
    :root {
      --bg: #0f1420;
      --bg-elev: #121a2a;
      --panel: #171f31;
      --panel-2: #1d2740;
      --txt: #e7ecf6;
      --txt-muted: #9fb2d9;
      --brand: #5b8cff;
      --brand-2: #7ee7ff;
      --ok: #29c36a;
      --warn: #ffb020;
      --danger: #ff5470;
      --shadow: 0 10px 30px rgba(0,0,0,.35);
      --radius: 18px;
      --radius-sm: 12px;
      --radius-xs: 9px;
      --gap: 18px;
      --gap-sm: 12px;
      --gap-xs: 8px;
      --border: 1px solid rgba(255,255,255,.08);
    }
    :root.light {
      --bg: #f7f9fc;
      --bg-elev: #ffffff;
      --panel: #ffffff;
      --panel-2: #f2f5fb;
      --txt: #111827;
      --txt-muted: #5b6b92;
      --brand: #3056ff;
      --brand-2: #00aee0;
      --ok: #18a558;
      --warn: #c47f00;
      --danger: #d11e49;
      --shadow: 0 12px 24px rgba(17,24,39,.08);
      --border: 1px solid rgba(14,23,38,.08);
    }

    /* Reset & base */
    *, *::before, *::after { box-sizing: border-box; }
    html, body { height: 100%; }
    body {
      margin: 0; font-family: "Pretendard", system-ui, -apple-system, Segoe UI, Roboto, Noto Sans KR, Apple SD Gothic Neo, sans-serif;
      background: var(--bg); color: var(--txt);
      -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale;
    }
    a { color: inherit; text-decoration: none; }
    .visually-hidden { position: absolute; width: 1px; height: 1px; margin: -1px; border: 0; padding: 0; clip: rect(0 0 0 0); overflow: hidden; }

    /* Layout */
    .app {
      display: grid; grid-template-columns: 260px 1fr; grid-template-rows: 72px 1fr; grid-template-areas:
      "sidebar header"
      "sidebar main"; min-height: 100vh; gap: 0;
    }
    header { grid-area: header; backdrop-filter: saturate(140%) blur(10px); position: sticky; top: 0; z-index: 50; }
    aside { grid-area: sidebar; position: sticky; top: 0; height: 100vh; overflow: auto; }
    main { grid-area: main; padding: 22px; }

    /* Header */
    .topbar {
      display: flex; align-items: center; justify-content: space-between; height: 72px;
      background: linear-gradient(180deg, rgba(255,255,255,.04), rgba(255,255,255,0)) , var(--bg-elev);
      border-bottom: var(--border);
      padding: 0 18px 0 10px; box-shadow: var(--shadow);
    }
    .brand { display: flex; align-items: center; gap: 12px; }
    .brand__logo {
      width: 42px; height: 42px; display: grid; place-items: center; border-radius: 12px;
      background: radial-gradient(100% 100% at 0% 0%, var(--brand) 0%, var(--brand-2) 100%);
      color: #00121c; font-weight: 800; letter-spacing: .5px; box-shadow: inset 0 -2px 10px rgba(0,0,0,.2);
    }
    .brand__name { font-size: 18px; font-weight: 700; }

    .top-actions { display: flex; align-items: center; gap: 10px; }
    .input {
      display: flex; align-items: center; gap: 8px; background: var(--panel-2); border: var(--border); border-radius: 12px; padding: 8px 12px; min-width: 320px;
    }
    .input input { background: transparent; border: 0; outline: none; color: var(--txt); width: 100%; }
    .btn {
      display: inline-flex; align-items: center; gap: 8px; border: var(--border); background: var(--panel);
      padding: 9px 12px; border-radius: 10px; cursor: pointer; transition: transform .06s ease, background .2s;
    }
    .btn:hover { transform: translateY(-1px); }
    .btn.primary { background: linear-gradient(180deg, rgba(255,255,255,.05), rgba(255,255,255,0)), var(--brand); color: #00121c; border: none; font-weight: 700; }
    .avatar { width: 36px; height: 36px; border-radius: 50%; background: linear-gradient(180deg, #8fd3ff, #6ea8ff); display: grid; place-items: center; font-weight: 700; color: #0a1421; }

    /* Sidebar */
    .sidebar { background: var(--panel); border-right: var(--border); display: flex; flex-direction: column; }
    .sidebar .section { padding: 14px 16px; color: var(--txt-muted); font-weight: 600; letter-spacing: .6px; text-transform: uppercase; font-size: 12px; }
    .nav { display: grid; gap: 6px; padding: 0 12px 18px; }
    .nav a { display: flex; align-items: center; gap: 12px; padding: 10px 12px; border-radius: 10px; color: var(--txt-muted); }
    .nav a:hover { background: var(--panel-2); color: var(--txt); }
    .nav a.active { background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,0)), var(--panel-2); color: var(--txt); border: 1px solid rgba(255,255,255,.08);
      box-shadow: inset 0 0 0 1px rgba(255,255,255,.05);
    }
    .sidebar-footer { margin-top: auto; padding: 14px; display: grid; gap: 10px; }

    /* Main */
    .grid { display: grid; gap: var(--gap); }
    .grid.cols-4 { grid-template-columns: repeat(4, minmax(0, 1fr)); }
    .grid.cols-3 { grid-template-columns: repeat(3, minmax(0, 1fr)); }
    .grid.cols-2 { grid-template-columns: repeat(2, minmax(0, 1fr)); }

    .card { background: var(--panel); border: var(--border); border-radius: var(--radius); box-shadow: var(--shadow); padding: 16px; }
    .card-header { display: flex; align-items: center; justify-content: space-between; gap: 10px; margin-bottom: 8px; }
    .card-title { font-weight: 700; font-size: 15px; letter-spacing: .3px; }
    .kpis { display: grid; grid-template-columns: repeat(6, minmax(0,1fr)); gap: var(--gap); }
    .kpi { background: var(--panel-2); border: var(--border); border-radius: var(--radius-sm); padding: 16px; display:flex; flex-direction: column; gap: 6px; }
    .kpi .label { font-size: 12px; color: var(--txt-muted); letter-spacing: .3px; }
    .kpi .value { font-size: 22px; font-weight: 800; letter-spacing: .2px; }
    .kpi .delta { font-size: 12px; font-weight: 700; }
    .delta.ok { color: var(--ok); } .delta.warn { color: var(--warn);} .delta.bad { color: var(--danger);} 

    /* Table */
    .table-wrap { overflow: auto; border-radius: var(--radius); border: var(--border); }
    table { width: 100%; border-collapse: collapse; background: var(--panel); }
    thead th { position: sticky; top: 0; background: var(--panel-2); color: var(--txt-muted); font-size: 12px; text-transform: uppercase; letter-spacing: .6px; }
    th, td { padding: 12px 14px; border-bottom: var(--border); text-align: left; }
    tr:hover td { background: rgba(255,255,255,.03); }
    .status { display: inline-flex; align-items: center; gap: 8px; padding: 4px 8px; border-radius: 999px; font-size: 12px; border: var(--border); }
    .status.ok { background: rgba(41,195,106,.12); color: var(--ok); border-color: rgba(41,195,106,.3); }
    .status.warn { background: rgba(255,176,32,.12); color: var(--warn); border-color: rgba(255,176,32,.3); }
    .status.bad { background: rgba(255,84,112,.12); color: var(--danger); border-color: rgba(255,84,112,.3); }
    .table-tools { display: flex; flex-wrap: wrap; align-items: center; gap: 8px; margin-bottom: 8px; }

    /* Tabs */
    .tabs { display: flex; gap: 6px; margin-bottom: 8px; }
    .tab { padding: 8px 12px; border-radius: 10px; border: var(--border); color: var(--txt-muted); cursor: pointer; }
    .tab.active { background: var(--panel-2); color: var(--txt); }

    /* Chip & badge */
    .chip { display:inline-flex; align-items:center; gap:8px; background: var(--panel-2); border: var(--border); padding: 6px 10px; border-radius: 999px; font-weight:600; }

    /* Footer */
    footer { margin-top: 24px; padding: 24px; color: var(--txt-muted); display:flex; align-items:center; justify-content:space-between; }

    /* Modal */
    .modal-backdrop { position: fixed; inset: 0; background: rgba(0,0,0,.45); display: none; align-items: center; justify-content: center; z-index: 100; }
    .modal { width: min(700px, 92vw); background: var(--panel); border: var(--border); border-radius: var(--radius); box-shadow: var(--shadow); padding: 18px; }
    .modal.show + .modal-backdrop, .modal-backdrop.show { display: flex; }

    /* Toast */
    .toasts { position: fixed; right: 16px; bottom: 16px; display: grid; gap: 10px; z-index: 120; }
    .toast { background: var(--panel); border: var(--border); border-left: 4px solid var(--brand); border-radius: 12px; padding: 12px 14px; box-shadow: var(--shadow); min-width: 280px; }

    /* Responsive */
    @media (max-width: 1200px) {
      .kpis { grid-template-columns: repeat(3, minmax(0,1fr)); }
      .grid.cols-4 { grid-template-columns: repeat(2, minmax(0, 1fr)); }
      .grid.cols-3 { grid-template-columns: repeat(2, minmax(0, 1fr)); }
      .app { grid-template-columns: 80px 1fr; }
      .sidebar .label { display: none; }
      .brand__name { display: none; }
      .input { min-width: 200px; }
    }
    @media (max-width: 720px) {
      .kpis { grid-template-columns: repeat(2, minmax(0,1fr)); }
      .grid.cols-2, .grid.cols-3, .grid.cols-4 { grid-template-columns: 1fr; }
      .app { grid-template-columns: 1fr; grid-template-areas:
        "header"
        "main";
      }
      aside { display: none; }
      .input { display: none; }
    }
  </style>
</head>

<body>
  <div class="app">
    <!-- Sidebar -->
    <aside class="sidebar">
      <div class="section">ë©”ì¸ ë©”ë‰´</div>
      <nav class="nav" id="side-nav">
        <a href="#overview" class="active"><span>ğŸ“Š</span> <span class="label">ê°œìš”</span></a>
        <a href="#revenue"><span>ğŸ’¹</span> <span class="label">ë§¤ì¶œ</span></a>
        <a href="#risk"><span>ğŸ§¯</span> <span class="label">ë¦¬ìŠ¤í¬</span></a>
        <a href="#ops"><span>ğŸ§­</span> <span class="label">ìš´ì˜</span></a>
        <a href="#customers"><span>ğŸ‘¥</span> <span class="label">ê³ ê°</span></a>
        <a href="#settings"><span>âš™ï¸</span> <span class="label">ì„¤ì •</span></a>
      </nav>
      <div class="section">ë¹ ë¥¸ ì‘ì—…</div>
      <div class="nav">
        <a href="#" id="open-modal"><span>â•</span> <span class="label">ìƒˆ ë³´ê³ ì„œ</span></a>
        <a href="#" id="download-csv"><span>â¬‡ï¸</span> <span class="label">CSV ë‹¤ìš´ë¡œë“œ</span></a>
        <a href="#" id="toggle-theme"><span>ğŸŒ“</span> <span class="label">ë¼ì´íŠ¸/ë‹¤í¬</span></a>
      </div>
      <div class="sidebar-footer">
        <div class="chip">ğŸ”” ì•Œë¦¼ <span id="notif-count" class="chip">0</span></div>
        <small style="color:var(--txt-muted)">ì—”í„°í”„ë¼ì´ì¦ˆ v1.0.0</small>
      </div>
    </aside>

    <!-- Header -->
    <header>
      <div class="topbar">
        <div class="brand">
          <div class="brand__logo">EO</div>
          <div class="brand__name">Enterprise Ops</div>
        </div>
        <div class="top-actions">
          <label class="input">
            <span>ğŸ”</span>
            <input id="search" type="search" placeholder="ê²€ìƒ‰: í”„ë¡œì íŠ¸, ê³ ê°, ì§€í‘œâ€¦" />
          </label>
          <button class="btn" id="sidebar-collapse">ì‚¬ì´ë“œë°”</button>
          <button class="btn" id="notify">ì•Œë¦¼ í…ŒìŠ¤íŠ¸</button>
          <button class="btn primary" id="new-report">+ ìƒˆ ë³´ê³ ì„œ</button>
          <div class="avatar" title="Gloria">GL</div>
        </div>
      </div>
    </header>

    <!-- Main -->
    <main>
      <!-- KPIs -->
      <section id="overview" class="grid" style="margin-bottom: 18px;">
        <div class="kpis">
          <div class="kpi"><div class="label">ì˜¤ëŠ˜ ë§¤ì¶œ</div><div class="value" id="kpi-sales">â‚©-</div><div class="delta ok" id="kpi-sales-delta">+0.0% ì˜¤ëŠ˜</div></div>
          <div class="kpi"><div class="label">ì›”ê°„ MRR</div><div class="value" id="kpi-mrr">â‚©-</div><div class="delta ok" id="kpi-mrr-delta">+0.0% MoM</div></div>
          <div class="kpi"><div class="label">í™œì„± ì‚¬ìš©ì</div><div class="value" id="kpi-users">-</div><div class="delta ok" id="kpi-users-delta">+0.0% WoW</div></div>
          <div class="kpi"><div class="label">ì´íƒˆë¥ </div><div class="value" id="kpi-churn">-</div><div class="delta bad" id="kpi-churn-delta">+0.0% MoM</div></div>
          <div class="kpi"><div class="label">ê°€ë™ë¥ </div><div class="value" id="kpi-uptime">-</div><div class="delta ok" id="kpi-uptime-delta">+0.0% 30d</div></div>
          <div class="kpi"><div class="label">ì•Œë¦¼</div><div class="value" id="kpi-alerts">-</div><div class="delta warn" id="kpi-alerts-delta">ìµœê·¼ 24h</div></div>
        </div>
      </section>

      <!-- Charts Row -->
      <section class="grid cols-3">
        <article class="card">
          <div class="card-header">
            <div class="card-title">ë§¤ì¶œ & ë¹„ìš© (12ê°œì›”)</div>
            <div class="chip">ğŸ’³ ì¬ë¬´</div>
          </div>
          <canvas id="chartRevenue" height="140"></canvas>
        </article>
        <article class="card">
          <div class="card-header">
            <div class="card-title">ìƒìœ„ ì œí’ˆ 5</div>
            <div class="tabs">
              <button class="tab active" data-topn="5">Top 5</button>
              <button class="tab" data-topn="10">Top 10</button>
            </div>
          </div>
          <canvas id="chartProducts" height="140"></canvas>
        </article>
        <article class="card">
          <div class="card-header">
            <div class="card-title">íŠ¸ë˜í”½ ì†ŒìŠ¤</div>
            <div class="chip">ğŸŒ ë§ˆì¼€íŒ…</div>
          </div>
          <canvas id="chartTraffic" height="140"></canvas>
        </article>
      </section>

      <!-- Table + Activity -->
      <section class="grid cols-2" style="margin-top: 18px;">
        <article class="card">
          <div class="card-header">
            <div class="card-title">ìš´ì˜ ì´ìŠˆ ë¡œê·¸ (ìµœê·¼ 200ê±´)</div>
            <div class="table-tools">
              <input id="table-search" type="search" placeholder="í•„í„°: ì„œë¹„ìŠ¤ëª…, ì‹¬ê°ë„, ìƒíƒœâ€¦" class="btn" style="min-width:260px" />
              <select id="sev-filter" class="btn">
                <option value="">ì‹¬ê°ë„(ì „ì²´)</option>
                <option>Low</option>
                <option>Medium</option>
                <option>High</option>
                <option>Critical</option>
              </select>
              <button class="btn" id="sort-created">ìƒì„±ì¼ ì •ë ¬</button>
              <button class="btn" id="reset-table">ì´ˆê¸°í™”</button>
            </div>
          </div>
          <div class="table-wrap">
            <table id="issues">
              <thead>
                <tr>
                  <th>Ticket</th>
                  <th>ì„œë¹„ìŠ¤</th>
                  <th>ì‹¬ê°ë„</th>
                  <th>ìƒíƒœ</th>
                  <th>ë‹´ë‹¹</th>
                  <th>SLA</th>
                  <th>ìƒì„±</th>
                </tr>
              </thead>
              <tbody id="issues-body">
                <!-- 40ê°œì˜ ì‹¤ì œ ìƒ˜í”Œ í–‰ (ë‚˜ë¨¸ì§€ëŠ” JSë¡œ ì¶”ê°€) -->
                <tr><td>#2025-0001</td><td>Auth API</td><td>High</td><td><span class="status warn">Investigating</span></td><td>Kim</td><td>4h</td><td>2025-08-25 09:22</td></tr>
                <tr><td>#2025-0002</td><td>Orders</td><td>Medium</td><td><span class="status ok">Resolved</span></td><td>Lee</td><td>8h</td><td>2025-08-25 09:40</td></tr>
                <tr><td>#2025-0003</td><td>Payments</td><td>Critical</td><td><span class="status bad">Outage</span></td><td>Choi</td><td>1h</td><td>2025-08-25 10:05</td></tr>
                <tr><td>#2025-0004</td><td>Analytics</td><td>Low</td><td><span class="status ok">Resolved</span></td><td>Park</td><td>24h</td><td>2025-08-25 10:48</td></tr>
                <tr><td>#2025-0005</td><td>Billing</td><td>High</td><td><span class="status warn">Mitigating</span></td><td>Han</td><td>6h</td><td>2025-08-25 11:02</td></tr>
                <tr><td>#2025-0006</td><td>CRM</td><td>Medium</td><td><span class="status ok">Resolved</span></td><td>Jeon</td><td>12h</td><td>2025-08-25 11:18</td></tr>
                <tr><td>#2025-0007</td><td>Gateway</td><td>High</td><td><span class="status warn">Mitigating</span></td><td>Shin</td><td>4h</td><td>2025-08-25 11:46</td></tr>
                <tr><td>#2025-0008</td><td>ETL</td><td>Low</td><td><span class="status ok">Resolved</span></td><td>Jung</td><td>24h</td><td>2025-08-25 12:14</td></tr>
                <tr><td>#2025-0009</td><td>Cache</td><td>Medium</td><td><span class="status warn">Investigating</span></td><td>Song</td><td>8h</td><td>2025-08-25 12:37</td></tr>
                <tr><td>#2025-0010</td><td>Search</td><td>High</td><td><span class="status bad">Outage</span></td><td>Yoo</td><td>2h</td><td>2025-08-25 12:55</td></tr>
                <tr><td>#2025-0011</td><td>Recsys</td><td>Medium</td><td><span class="status warn">Mitigating</span></td><td>Na</td><td>12h</td><td>2025-08-25 13:20</td></tr>
                <tr><td>#2025-0012</td><td>Auth API</td><td>Low</td><td><span class="status ok">Resolved</span></td><td>Kim</td><td>24h</td><td>2025-08-25 14:02</td></tr>
                <tr><td>#2025-0013</td><td>Payments</td><td>High</td><td><span class="status warn">Investigating</span></td><td>Choi</td><td>4h</td><td>2025-08-25 14:42</td></tr>
                <tr><td>#2025-0014</td><td>Gateway</td><td>Medium</td><td><span class="status ok">Resolved</span></td><td>Shin</td><td>12h</td><td>2025-08-25 15:05</td></tr>
                <tr><td>#2025-0015</td><td>Orders</td><td>Critical</td><td><span class="status bad">Outage</span></td><td>Lee</td><td>1h</td><td>2025-08-25 15:31</td></tr>
                <tr><td>#2025-0016</td><td>Analytics</td><td>Low</td><td><span class="status ok">Resolved</span></td><td>Park</td><td>24h</td><td>2025-08-25 15:58</td></tr>
                <tr><td>#2025-0017</td><td>Billing</td><td>Medium</td><td><span class="status warn">Investigating</span></td><td>Han</td><td>8h</td><td>2025-08-25 16:20</td></tr>
                <tr><td>#2025-0018</td><td>CRM</td><td>High</td><td><span class="status warn">Mitigating</span></td><td>Jeon</td><td>6h</td><td>2025-08-25 16:40</td></tr>
                <tr><td>#2025-0019</td><td>Cache</td><td>Low</td><td><span class="status ok">Resolved</span></td><td>Song</td><td>24h</td><td>2025-08-25 17:05</td></tr>
                <tr><td>#2025-0020</td><td>Search</td><td>Medium</td><td><span class="status warn">Investigating</span></td><td>Yoo</td><td>12h</td><td>2025-08-25 17:40</td></tr>
                <tr><td>#2025-0021</td><td>Auth API</td><td>High</td><td><span class="status bad">Outage</span></td><td>Kim</td><td>2h</td><td>2025-08-26 09:02</td></tr>
                <tr><td>#2025-0022</td><td>Orders</td><td>Low</td><td><span class="status ok">Resolved</span></td><td>Lee</td><td>24h</td><td>2025-08-26 09:18</td></tr>
                <tr><td>#2025-0023</td><td>Payments</td><td>Medium</td><td><span class="status ok">Resolved</span></td><td>Choi</td><td>8h</td><td>2025-08-26 09:47</td></tr>
                <tr><td>#2025-0024</td><td>Analytics</td><td>High</td><td><span class="status warn">Mitigating</span></td><td>Park</td><td>4h</td><td>2025-08-26 10:22</td></tr>
                <tr><td>#2025-0025</td><td>Billing</td><td>Critical</td><td><span class="status bad">Outage</span></td><td>Han</td><td>1h</td><td>2025-08-26 10:55</td></tr>
                <tr><td>#2025-0026</td><td>CRM</td><td>Low</td><td><span class="status ok">Resolved</span></td><td>Jeon</td><td>24h</td><td>2025-08-26 11:18</td></tr>
                <tr><td>#2025-0027</td><td>Gateway</td><td>Medium</td><td><span class="status warn">Investigating</span></td><td>Shin</td><td>12h</td><td>2025-08-26 11:40</td></tr>
                <tr><td>#2025-0028</td><td>ETL</td><td>High</td><td><span class="status warn">Mitigating</span></td><td>Jung</td><td>6h</td><td>2025-08-26 12:12</td></tr>
                <tr><td>#2025-0029</td><td>Cache</td><td>Low</td><td><span class="status ok">Resolved</span></td><td>Song</td><td>24h</td><td>2025-08-26 12:33</td></tr>
                <tr><td>#2025-0030</td><td>Search</td><td>Medium</td><td><span class="status ok">Resolved</span></td><td>Yoo</td><td>12h</td><td>2025-08-26 12:49</td></tr>
                <tr><td>#2025-0031</td><td>Recsys</td><td>High</td><td><span class="status warn">Investigating</span></td><td>Na</td><td>4h</td><td>2025-08-26 13:12</td></tr>
                <tr><td>#2025-0032</td><td>Auth API</td><td>Low</td><td><span class="status ok">Resolved</span></td><td>Kim</td><td>24h</td><td>2025-08-26 13:40</td></tr>
                <tr><td>#2025-0033</td><td>Payments</td><td>Medium</td><td><span class="status warn">Mitigating</span></td><td>Choi</td><td>8h</td><td>2025-08-26 14:05</td></tr>
                <tr><td>#2025-0034</td><td>Gateway</td><td>High</td><td><span class="status bad">Outage</span></td><td>Shin</td><td>2h</td><td>2025-08-26 14:42</td></tr>
                <tr><td>#2025-0035</td><td>Orders</td><td>Low</td><td><span class="status ok">Resolved</span></td><td>Lee</td><td>24h</td><td>2025-08-26 15:02</td></tr>
                <tr><td>#2025-0036</td><td>Analytics</td><td>Medium</td><td><span class="status ok">Resolved</span></td><td>Park</td><td>12h</td><td>2025-08-26 15:22</td></tr>
                <tr><td>#2025-0037</td><td>Billing</td><td>High</td><td><span class="status warn">Investigating</span></td><td>Han</td><td>6h</td><td>2025-08-26 15:50</td></tr>
                <tr><td>#2025-0038</td><td>CRM</td><td>Critical</td><td><span class="status bad">Outage</span></td><td>Jeon</td><td>1h</td><td>2025-08-26 16:10</td></tr>
                <tr><td>#2025-0039</td><td>Cache</td><td>High</td><td><span class="status warn">Mitigating</span></td><td>Song</td><td>4h</td><td>2025-08-26 16:38</td></tr>
                <tr><td>#2025-0040</td><td>Search</td><td>Low</td><td><span class="status ok">Resolved</span></td><td>Yoo</td><td>24h</td><td>2025-08-26 17:00</td></tr>
              </tbody>
            </table>
          </div>
          <div style="display:flex; justify-content: space-between; align-items:center; margin-top:10px;">
            <div id="table-stats" class="chip">ì´ 0ê±´</div>
            <div>
              <button class="btn" data-page="prev">ì´ì „</button>
              <span class="chip" id="page-info">1 / 1</span>
              <button class="btn" data-page="next">ë‹¤ìŒ</button>
            </div>
          </div>
        </article>

        <article class="card">
          <div class="card-header">
            <div class="card-title">ì‹¤ì‹œê°„ í™œë™</div>
            <div class="chip">â± ìµœê·¼ 24ì‹œê°„</div>
          </div>
          <div id="activity" class="grid" style="gap:12px; max-height: 520px; overflow:auto">
            <div class="chip">08:10 ê²°ì œ ì„±ê³µë¥  99.97% (5m) âœ…</div>
            <div class="chip">08:25 ì‹ ê·œ êµ¬ë… 32ê±´ ğŸ‰</div>
            <div class="chip">08:44 ì¥ì•  í‹°ì¼“ #2025-0038 ëŒ€ì‘ ì‹œì‘ ğŸš‘</div>
            <div class="chip">09:05 ì ì¬ ì´íƒˆ ê³ ê° 12ëª… ì¬í™œì„±í™” ìº í˜ì¸ ì‹œì‘ ğŸ“£</div>
            <div class="chip">09:40 ETL ë°°ì¹˜ ì§€ì—° 4ë¶„ â³</div>
            <div class="chip">10:02 ë¶ë¯¸ íŠ¸ë˜í”½ ê¸‰ì¦ +12% ğŸŒ</div>
            <div class="chip">10:18 ì‹ ê·œ ëŒ€ì‹œë³´ë“œ ë°°í¬ v1.0.0 ğŸš€</div>
            <div class="chip">10:54 SLA ê²½ê³ : Payments API p95 780ms âš ï¸</div>
            <div class="chip">11:20 ì•Œë¦¼: Top ê³ ê° ARPU +5.4% ğŸ“ˆ</div>
            <div class="chip">12:00 ì •ê¸° ë°±ì—… ì™„ë£Œ ğŸ”</div>
          </div>
          <div style="margin-top:12px; display:flex; gap:8px;">
            <input id="activity-input" class="btn" placeholder="í™œë™ ìˆ˜ë™ ì¶”ê°€ (ì—”í„°)" />
            <button class="btn" id="activity-clear">ì „ì²´ ì§€ìš°ê¸°</button>
          </div>
        </article>
      </section>

      <!-- Settings / Help -->
      <section id="settings" class="grid cols-2" style="margin-top: 18px;">
        <article class="card">
          <div class="card-header">
            <div class="card-title">í™˜ê²½ ì„¤ì •</div>
          </div>
          <div class="grid cols-2">
            <label class="btn"><input id="toggle-animations" type="checkbox" checked style="margin-right:8px;"> ì• ë‹ˆë©”ì´ì…˜ íš¨ê³¼</label>
            <label class="btn"><input id="persist-state" type="checkbox" checked style="margin-right:8px;"> ì„¤ì • ì €ì¥ (LocalStorage)</label>
            <label class="btn"><input id="dense-table" type="checkbox" style="margin-right:8px;"> í…Œì´ë¸” ë°€ì§‘ ëª¨ë“œ</label>
            <label class="btn"><input id="auto-refresh" type="checkbox" style="margin-right:8px;"> 60ì´ˆë§ˆë‹¤ ìë™ ìƒˆë¡œê³ ì¹¨</label>
          </div>
        </article>
        <article class="card">
          <div class="card-header">
            <div class="card-title">ë„ì›€ë§</div>
          </div>
          <p style="color:var(--txt-muted); line-height:1.6">
            ì´ í˜ì´ì§€ëŠ” ì‹¤ì œ ìš´ì˜ ì‚¬ì´íŠ¸ì™€ ìœ ì‚¬í•œ UI/UXë¥¼ ì œê³µí•˜ëŠ” ì •ì  HTML ìƒ˜í”Œì…ë‹ˆë‹¤. FastAPIë¡œ ê·¸ëŒ€ë¡œ ë°˜í™˜í•˜ê±°ë‚˜, í…œí”Œë¦¿ ì—”ì§„ ì—†ì´ ë‹¨ì¼ íŒŒì¼ë¡œ ë°°í¬í•´ë„ ë©ë‹ˆë‹¤.
            ì‚¬ì´ë“œë°”, ë‹¤í¬ëª¨ë“œ, KPI, ì°¨íŠ¸(Chart.js), ê²€ìƒ‰/í•„í„°/í˜ì´ì§€ë„¤ì´ì…˜ ê°€ëŠ¥í•œ í…Œì´ë¸”, ëª¨ë‹¬, í† ìŠ¤íŠ¸, ì„¤ì • ë³´ì¡´ ë“± í”í•œ ê¸°ëŠ¥ì„ í¬í•¨í•©ë‹ˆë‹¤.
          </p>
        </article>
      </section>

      <footer>
        <span>Â© 2025 Enterprise Ops Dashboard â€” Built for demo</span>
        <span class="chip">ì„œìš¸ Â· KST</span>
      </footer>
    </main>
  </div>

  <!-- Modal -->
  <div class="modal-backdrop" id="modal-backdrop">
    <div class="modal" role="dialog" aria-modal="true" aria-labelledby="modal-title">
      <div class="card-header">
        <div class="card-title" id="modal-title">ìƒˆ ë³´ê³ ì„œ ë§Œë“¤ê¸°</div>
        <button class="btn" id="modal-close">ë‹«ê¸°</button>
      </div>
      <div class="grid cols-2">
        <label class="btn"><span>ì œëª©</span> <input id="report-title" style="margin-left:8px" placeholder="ì›”ê°„ ìš´ì˜ ë¦¬í¬íŠ¸"/></label>
        <label class="btn"><span>ë²”ìœ„</span> <select id="report-range" style="margin-left:8px"><option>ìµœê·¼ 7ì¼</option><option selected>ìµœê·¼ 30ì¼</option><option>ìµœê·¼ 90ì¼</option></select></label>
        <label class="btn" style="grid-column: 1 / -1"><span>ì„¤ëª…</span> <input id="report-desc" style="margin-left:8px" placeholder="í•µì‹¬ KPI, ì´ìŠˆ ìš”ì•½, ê¶Œê³ ì‚¬í•­â€¦"/></label>
      </div>
      <div style="display:flex; justify-content:flex-end; gap:8px; margin-top: 10px;">
        <button class="btn" id="modal-cancel">ì·¨ì†Œ</button>
        <button class="btn primary" id="modal-create">ìƒì„±</button>
      </div>
    </div>
  </div>

  <!-- Toasts -->
  <div class="toasts" id="toasts"></div>

  <script>
    // -----------------------------------
    // Utilities
    // -----------------------------------
    const $ = (sel, el=document) => el.querySelector(sel);
    const $$ = (sel, el=document) => Array.from(el.querySelectorAll(sel));
    const fmt = new Intl.NumberFormat('ko-KR');
    const money = n => `â‚©${fmt.format(n)}`;
    const dayjs = date => new Date(date);

    const state = {
      theme: localStorage.getItem('theme') || (matchMedia('(prefers-color-scheme: light)').matches ? 'light' : 'dark'),
      sidebarCollapsed: JSON.parse(localStorage.getItem('sidebarCollapsed') || 'false'),
      animations: JSON.parse(localStorage.getItem('animations') || 'true'),
      persist: JSON.parse(localStorage.getItem('persist') || 'true'),
      denseTable: JSON.parse(localStorage.getItem('denseTable') || 'false'),
      autoRefresh: JSON.parse(localStorage.getItem('autoRefresh') || 'false'),
    };

    // Theme apply
    const applyTheme = (t) => {
      document.documentElement.classList.toggle('light', t === 'light');
      localStorage.setItem('theme', t);
    };

    // Sidebar collapse apply
    const applySidebar = (collapsed) => {
      const app = $('.app');
      if (collapsed) app.style.gridTemplateColumns = '80px 1fr';
      else app.style.gridTemplateColumns = '260px 1fr';
      localStorage.setItem('sidebarCollapsed', JSON.stringify(collapsed));
    };

    // Dense table
    const applyDense = (dense) => {
      const table = $('#issues');
      table.style.fontSize = dense ? '13px' : '';
      $$('th, td', table).forEach(td => td.style.padding = dense ? '8px 10px' : '12px 14px');
      localStorage.setItem('denseTable', JSON.stringify(dense));
    };

    // Toasts
    const toast = (msg, kind = 'info') => {
      const t = document.createElement('div');
      t.className = 'toast';
      t.innerHTML = `<strong style="display:block;margin-bottom:4px">${kind.toUpperCase()}</strong>${msg}`;
      $('#toasts').appendChild(t);
      const n = parseInt($('#notif-count').textContent || '0', 10) + 1;
      $('#notif-count').textContent = n;
      setTimeout(() => t.remove(), 4000);
    };

    // Modal
    const openModal = () => { $('#modal-backdrop').classList.add('show'); };
    const closeModal = () => { $('#modal-backdrop').classList.remove('show'); };

    // -----------------------------------
    // Mock Data
    // -----------------------------------
    const months = Array.from({length: 12}, (_, i) => {
      const d = new Date(); d.setMonth(d.getMonth() - (11 - i));
      return `${d.getFullYear()}-${String(d.getMonth()+1).padStart(2,'0')}`;
    });
    const rand = (min, max) => Math.round(Math.random() * (max - min) + min);

    const revenue = months.map(() => rand(220_000_000, 480_000_000));
    const cost    = months.map(() => rand(100_000_000, 220_000_000));

    const products = Array.from({length: 12}, (_, i) => ({
      name: `ìƒí’ˆ ${String.fromCharCode(65+i)}`,
      sales: rand(1200, 8400)
    }));

    const traffic = [
      {label: 'Organic', value: rand(35, 48)},
      {label: 'Paid', value: rand(18, 30)},
      {label: 'Referral', value: rand(10, 20)},
      {label: 'Email', value: rand(8, 16)},
      {label: 'Direct', value: rand(10, 22)},
    ];

    // Issues: extend table to ~200 rows
    const issueSeeds = [
      {svc:'Auth API', sev:'Low'}, {svc:'Orders', sev:'Medium'}, {svc:'Payments', sev:'High'}, {svc:'Analytics', sev:'Low'},
      {svc:'Billing', sev:'High'}, {svc:'CRM', sev:'Medium'}, {svc:'Gateway', sev:'High'}, {svc:'ETL', sev:'Low'},
      {svc:'Cache', sev:'Medium'}, {svc:'Search', sev:'High'}, {svc:'Recsys', sev:'Medium'}
    ];
    const statuses = ['Resolved','Investigating','Mitigating','Outage'];
    const owners = ['Kim','Lee','Choi','Park','Han','Jeon','Shin','Jung','Song','Na','Yoo'];

    function synthesizeIssues(existingRows=40, targetRows=220) {
      const tbody = $('#issues-body');
      const start = existingRows + 1;
      for (let i = start; i <= targetRows; i++) {
        const seed = issueSeeds[rand(0, issueSeeds.length-1)];
        const status = statuses[rand(0, statuses.length-1)];
        const owner = owners[rand(0, owners.length-1)];
        const sla = ['1h','2h','4h','6h','8h','12h','24h'][rand(0,6)];
        const dt = new Date(2025, 7, rand(20, 31), rand(8, 23), rand(0, 59));
        const id = `#2025-${String(i).padStart(4,'0')}`;
        const cls = status === 'Outage' ? 'bad' : (status === 'Resolved' ? 'ok' : 'warn');
        const tr = document.createElement('tr');
        tr.innerHTML = `<td>${id}</td><td>${seed.svc}</td><td>${seed.sev}</td><td><span class="status ${cls}">${status}</span></td><td>${owner}</td><td>${sla}</td><td>${dt.toISOString().slice(0,16).replace('T',' ')}</td>`;
        tbody.appendChild(tr);
      }
    }

    // -----------------------------------
    // Charts
    // -----------------------------------
    let revenueChart, productChart, trafficChart;

    function buildRevenue() {
      const ctx = $('#chartRevenue');
      revenueChart = new Chart(ctx, {
        type: 'line',
        data: {
          labels: months,
          datasets: [
            {label: 'Revenue', data: revenue, tension:.35, borderWidth: 2, fill: true, backgroundColor: 'rgba(91,140,255,.12)', borderColor: '#5b8cff'},
            {label: 'Cost', data: cost, tension:.35, borderWidth: 2, fill: true, backgroundColor: 'rgba(126,231,255,.10)', borderColor: '#7ee7ff'}
          ]
        },
        options: {
          responsive: true,
          plugins: { legend: { labels: { color: getComputedStyle(document.documentElement).getPropertyValue('--txt') } } },
          scales: {
            x: { ticks: { color: getComputedStyle(document.documentElement).getPropertyValue('--txt-muted') }, grid: { color: 'rgba(255,255,255,.08)'} },
            y: { ticks: { color: getComputedStyle(document.documentElement).getPropertyValue('--txt-muted'), callback: v => fmt.format(v/1_000_000)+'M' }, grid: { color: 'rgba(255,255,255,.08)'} }
          }
        }
      });
    }

    function buildProducts(topn=5) {
      const ctx = $('#chartProducts');
      const top = products.slice(0).sort((a,b)=>b.sales-a.sales).slice(0, topn);
      if (productChart) productChart.destroy();
      productChart = new Chart(ctx, {
        type: 'bar',
        data: { labels: top.map(d=>d.name), datasets: [{label: 'íŒë§¤ëŸ‰', data: top.map(d=>d.sales)}] },
        options: { scales: { x: { ticks: { color: getComputedStyle(document.documentElement).getPropertyValue('--txt-muted') } , grid:{display:false}}, y: { ticks:{ color: getComputedStyle(document.documentElement).getPropertyValue('--txt-muted') } } }, plugins:{legend:{labels:{color:getComputedStyle(document.documentElement).getPropertyValue('--txt')}}} }
      });
    }

    function buildTraffic() {
      const ctx = $('#chartTraffic');
      trafficChart = new Chart(ctx, {
        type: 'doughnut',
        data: { labels: traffic.map(d=>d.label), datasets: [{ data: traffic.map(d=>d.value) }] },
        options: { plugins: { legend: { position: 'bottom', labels:{ color: getComputedStyle(document.documentElement).getPropertyValue('--txt') } } } }
      });
    }

    // -----------------------------------
    // Table logic: search + filter + sort + paging
    // -----------------------------------
    const table = {
      page: 1, perPage: 20, rows: [], filtered: [],
      collect() { this.rows = $$('#issues-body tr').map(tr => ({ tr, text: tr.innerText.toLowerCase() })); this.filtered = this.rows; },
      apply() {
        // paging
        const start = (this.page-1)*this.perPage; const end = start + this.perPage;
        this.rows.forEach(({tr})=> tr.style.display='none');
        this.filtered.slice(start, end).forEach(({tr})=> tr.style.display='');
        $('#page-info').textContent = `${this.page} / ${Math.max(1, Math.ceil(this.filtered.length/this.perPage))}`;
        $('#table-stats').textContent = `ì´ ${fmt.format(this.filtered.length)}ê±´ Â· í˜ì´ì§€ë‹¹ ${this.perPage}`;
      },
      search(q) { q = q.toLowerCase(); this.filtered = this.rows.filter(r => r.text.includes(q)); this.page = 1; this.apply(); },
      filterSeverity(sev) {
        this.filtered = this.rows.filter(({tr}) => sev ? tr.children[2].innerText === sev : true);
        this.page = 1; this.apply();
      },
      sortByCreated() {
        const idx = 6; // created col
        this.filtered.sort((a,b) => a.tr.children[idx].innerText.localeCompare(b.tr.children[idx].innerText));
        this.page = 1; this.apply();
      },
      reset() { this.filtered = this.rows; this.page = 1; this.apply(); }
    };

    // -----------------------------------
    // KPI populate
    // -----------------------------------
    function populateKpis() {
      const sum = arr => arr.reduce((a,b)=>a+b,0);
      const rev = sum(revenue.slice(-3));
      const cst = sum(cost.slice(-3));
      $('#kpi-sales').textContent = money(revenue.at(-1));
      $('#kpi-sales-delta').textContent = `+${( (revenue.at(-1)/revenue.at(-2)-1)*100 ).toFixed(1)}% ì˜¤ëŠ˜`;
      $('#kpi-mrr').textContent = money(sum(revenue.slice(-1)));
      $('#kpi-mrr-delta').textContent = `+${( (revenue.at(-1)/revenue.at(-2)-1)*100 ).toFixed(1)}% MoM`;
      const users = rand(125_000, 188_000);
      $('#kpi-users').textContent = fmt.format(users);
      $('#kpi-users-delta').textContent = `+${rand(1,5)}.% WoW`;
      $('#kpi-churn').textContent = `${(Math.random()*3+1).toFixed(2)}%`;
      $('#kpi-churn-delta').textContent = `+${(Math.random()*0.8).toFixed(1)}% MoM`;
      $('#kpi-uptime').textContent = `${(99 + Math.random()).toFixed(3)}%`;
      $('#kpi-uptime-delta').textContent = `+${(Math.random()*0.02).toFixed(2)} 30d`;
      const alerts = rand(4,32);
      $('#kpi-alerts').textContent = alerts;
      $('#kpi-alerts-delta').textContent = `ìµœê·¼ 24h`;
    }

    // -----------------------------------
    // Actions
    // -----------------------------------
    document.addEventListener('DOMContentLoaded', () => {
      applyTheme(state.theme);
      applySidebar(state.sidebarCollapsed);
      applyDense(state.denseTable);

      buildRevenue(); buildProducts(); buildTraffic();
      populateKpis();

      synthesizeIssues(40, 220); // extend table to 220 rows
      table.collect(); table.apply();

      // Search
      $('#table-search').addEventListener('input', (e)=> table.search(e.target.value));
      $('#sev-filter').addEventListener('change', (e)=> table.filterSeverity(e.target.value));
      $('#sort-created').addEventListener('click', ()=> table.sortByCreated());
      $('#reset-table').addEventListener('click', ()=> { $('#table-search').value=''; $('#sev-filter').value=''; table.reset(); });

      // Paging
      $$('button[data-page]').forEach(btn => btn.addEventListener('click', () => {
        const maxPage = Math.max(1, Math.ceil(table.filtered.length/table.perPage));
        if (btn.dataset.page==='prev') table.page = Math.max(1, table.page-1);
        else table.page = Math.min(maxPage, table.page+1);
        table.apply();
      }));

      // Header actions
      $('#sidebar-collapse').addEventListener('click', ()=> { state.sidebarCollapsed = !state.sidebarCollapsed; applySidebar(state.sidebarCollapsed); });
      $('#notify').addEventListener('click', ()=> toast('ìƒˆë¡œìš´ ì‹œìŠ¤í…œ ì•Œë¦¼ì´ ë„ì°©í–ˆìŠµë‹ˆë‹¤. ë¡œê·¸ë¥¼ í™•ì¸í•˜ì„¸ìš”.','info'));
      $('#new-report').addEventListener('click', openModal);
      $('#open-modal').addEventListener('click', (e)=> { e.preventDefault(); openModal(); });
      $('#modal-close').addEventListener('click', closeModal);
      $('#modal-cancel').addEventListener('click', closeModal);
      $('#modal-create').addEventListener('click', ()=> {
        const title = $('#report-title').value || 'ë¬´ì œ';
        const range = $('#report-range').value;
        closeModal(); toast(`ë³´ê³ ì„œ "${title}" ê°€ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤. (${range})`, 'success');
      });

      // Activity
      $('#activity-input').addEventListener('keydown', (e)=> {
        if (e.key === 'Enter' && e.target.value.trim()) {
          const chip = document.createElement('div');
          const time = new Date().toTimeString().slice(0,5);
          chip.className = 'chip'; chip.textContent = `${time} ${e.target.value}`;
          $('#activity').prepend(chip);
          e.target.value = '';
        }
      });
      $('#activity-clear').addEventListener('click', ()=> $('#activity').innerHTML='');

      // Theme toggle
      $('#toggle-theme').addEventListener('click', (e)=>{ e.preventDefault(); state.theme = (state.theme==='light' ? 'dark':'light'); applyTheme(state.theme); });

      // Tabs TopN
      $$('.tab').forEach(tab => tab.addEventListener('click', () => { $$('.tab').forEach(t=>t.classList.remove('active')); tab.classList.add('active'); buildProducts(parseInt(tab.dataset.topn,10)); }));

      // Download CSV from table
      $('#download-csv').addEventListener('click', (e)=>{
        e.preventDefault();
        const rows = [['Ticket','Service','Severity','Status','Owner','SLA','Created']];
        $$('#issues-body tr').forEach(tr => rows.push(Array.from(tr.children).map(td=> td.innerText)));
        const csv = rows.map(r=> r.map(x => '"'+String(x).replaceAll('"','""')+'"').join(',')).join('\n');
        const blob = new Blob([csv], {type:'text/csv;charset=utf-8;'});
        const url = URL.createObjectURL(blob);
        const a = document.createElement('a'); a.href = url; a.download = 'issues.csv'; a.click(); URL.revokeObjectURL(url);
      });

      // Settings toggles
      $('#toggle-animations').addEventListener('change', (e)=> { state.animations = e.target.checked; document.body.style.scrollBehavior = state.animations ? 'smooth' : 'auto'; if(state.persist) localStorage.setItem('animations', JSON.stringify(state.animations)); });
      $('#persist-state').addEventListener('change', (e)=> { state.persist = e.target.checked; if(!state.persist) localStorage.clear(); });
      $('#dense-table').addEventListener('change', (e)=> { state.denseTable = e.target.checked; applyDense(state.denseTable); });
      $('#auto-refresh').addEventListener('change', (e)=> { state.autoRefresh = e.target.checked; if (state.autoRefresh) startAutoRefresh(); else stopAutoRefresh(); });

      // Persist initial
      if (state.persist) { localStorage.setItem('animations', JSON.stringify(state.animations)); localStorage.setItem('denseTable', JSON.stringify(state.denseTable)); }

      // Search focus
      $('#search').addEventListener('keydown', (e)=> { if (e.key==='Enter') toast(`"${e.target.value}" ê²€ìƒ‰ â€” (ë°ëª¨)`, 'info'); });

      document.body.style.scrollBehavior = state.animations ? 'smooth' : 'auto';
    });

    let refreshTimer = null;
    function startAutoRefresh(){ stopAutoRefresh(); refreshTimer = setInterval(()=>{ 
      // demo: just update KPIs and append activity
      populateKpis();
      const chip = document.createElement('div');
      const time = new Date().toTimeString().slice(0,5);
      chip.className = 'chip'; chip.textContent = `${time} ìë™ ìƒˆë¡œê³ ì¹¨: KPI ê°±ì‹ `;
      $('#activity').prepend(chip);
    }, 60000); }
    function stopAutoRefresh(){ if (refreshTimer) clearInterval(refreshTimer); }
  </script>
</body>
</html>
